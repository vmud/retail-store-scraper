# UAT Protocol Configuration
# Defines timeouts, thresholds, and test parameters

# Target application
application:
  base_url: "http://localhost:5001"
  name: "Retail Store Scraper Dashboard"

# Known retailers in the system
retailers:
  - verizon
  - att
  - target
  - tmobile
  - walmart
  - bestbuy

# Timeout configurations (in milliseconds)
timeouts:
  page_load: 10000          # Max time for page to fully load
  api_request: 5000         # Max time for API requests
  element_appear: 3000      # Max time for element to appear
  animation: 500            # Max time for animations to complete
  polling_interval: 5000    # Status polling interval (matches frontend)
  scraper_stop: 30000       # Max time for scraper to stop gracefully

# Performance thresholds
performance:
  page_load_dom_ready:
    target: 1000            # Target: < 1s
    maximum: 2000           # Maximum: 2s
  page_load_interactive:
    target: 2000            # Target: < 2s
    maximum: 5000           # Maximum: 5s
  api_status:
    target: 200             # Target: < 200ms
    maximum: 500            # Maximum: 500ms
  api_config:
    target: 100             # Target: < 100ms
    maximum: 300            # Maximum: 300ms
  api_scraper_start:
    target: 500             # Target: < 500ms
    maximum: 2000           # Maximum: 2s
  modal_open:
    target: 200             # Target: < 200ms
    maximum: 500            # Maximum: 500ms
  toast_appear:
    target: 100             # Target: < 100ms
    maximum: 300            # Maximum: 300ms

# Element selectors for browser automation
selectors:
  # Core app structure
  app: "#app"
  header: ".header"

  # Header elements
  header_status: "#header-status"
  config_btn: "#config-btn"
  current_time: "#current-time"

  # Metrics
  metrics_grid: "#metrics-grid"
  metric_stores: "#metric-stores"
  metric_requests: "#metric-requests"
  metric_duration: "#metric-duration"
  metric_rate: "#metric-rate"

  # Operations grid
  operations_grid: "#operations-grid"
  retailer_card: ".retailer-card"
  retailer_card_by_id: "[data-retailer=\"{retailer}\"]"

  # Card action buttons
  start_btn: "[data-action=\"start\"]"
  stop_btn: "[data-action=\"stop\"]"
  restart_btn: "[data-action=\"restart\"]"
  toggle_history_btn: "[data-action=\"toggle-history\"]"
  view_logs_btn: "[data-action=\"view-logs\"]"

  # Card data fields
  status_field: "[data-field=\"status\"]"
  progress_bar: "[data-field=\"progress-bar\"]"
  progress_fill: "[data-field=\"progress-fill\"]"
  percent_field: "[data-field=\"percent\"]"
  stores_field: "[data-field=\"stores\"]"

  # Run history
  run_history: ".run-history"
  run_history_list: ".run-history__list"
  run_history_toggle: ".run-history__toggle"

  # Modals
  config_modal: "#config-modal"
  config_editor: "#config-editor"
  config_save: "#config-save"
  config_cancel: "#config-cancel"
  config_close: "#config-modal-close"
  config_alert: "#config-alert"

  log_modal: "#log-modal"
  log_content: "#log-content"
  log_close: "#log-modal-close"
  log_stats: "#log-stats"
  log_filter_all: "[data-level=\"ALL\"]"
  log_filter_info: "[data-level=\"INFO\"]"
  log_filter_warning: "[data-level=\"WARNING\"]"
  log_filter_error: "[data-level=\"ERROR\"]"
  log_filter_debug: "[data-level=\"DEBUG\"]"

  # Toast notifications
  toast_container: "#toast-container"
  toast: ".toast"

  # Footer
  footer_timestamp: "#footer-timestamp"

  # Change panel
  change_panel: "#change-panel"
  change_panel_toggle: "#change-panel-toggle"
  change_new: "#change-new"
  change_closed: "#change-closed"
  change_modified: "#change-modified"

# API endpoints to test
api_endpoints:
  status: "/api/status"
  status_retailer: "/api/status/{retailer}"
  scraper_start: "/api/scraper/start"
  scraper_stop: "/api/scraper/stop"
  scraper_restart: "/api/scraper/restart"
  config: "/api/config"
  runs: "/api/runs/{retailer}"
  logs: "/api/logs/{retailer}/{run_id}"

# Test suite configuration
suites:
  init:
    id: "INIT"
    name: "Dashboard Initialization"
    priority: "critical"
    test_count: 3

  status:
    id: "STATUS"
    name: "Status Display"
    priority: "critical"
    test_count: 4

  control:
    id: "CONTROL"
    name: "Scraper Control"
    priority: "critical"
    test_count: 5

  error:
    id: "ERROR"
    name: "Error Handling"
    priority: "critical"
    test_count: 5

  api:
    id: "API"
    name: "API Contracts"
    priority: "critical"
    test_count: 4

  config:
    id: "CONFIG"
    name: "Configuration"
    priority: "high"
    test_count: 5

  logs:
    id: "LOGS"
    name: "Log Viewing"
    priority: "high"
    test_count: 3

  ui:
    id: "UI"
    name: "UI Components"
    priority: "high"
    test_count: 5

  history:
    id: "HISTORY"
    name: "Run History"
    priority: "medium"
    test_count: 2

  perf:
    id: "PERF"
    name: "Performance"
    priority: "medium"
    test_count: 3

  proxy:
    id: "PROXY"
    name: "Proxy Configuration"
    priority: "high"
    test_count: 3

# Report configuration
reporting:
  output_dir: "tests/uat/reports"
  screenshot_on_failure: true
  include_console_logs: true
  timestamp_format: "%Y-%m-%d %H:%M:%S"
